
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <!-- <script src="index.js"></script> -->
  </head>
  <body>
    <script>
      window.onload = docReady;

      function docReady() {
        if (typeof window.ethereum !== "undefined") {
          ethereum.request({ method: "eth_requestAccounts" }).then(()=> {
              getAccount();
          });

          console.log("MetaMask is installed!");
        } else {
          console.log("MetaMask is NOT installed!");
        }

        const ethereumButton = document.querySelector(".enableEthereumButton");
        const sendEthButton = document.querySelector(".sendEthButton");
        const showEthereumButton = document.querySelector(
          ".showEthereumButton"
        );

        const showAccount = document.querySelector(".showAccount");

        let accounts = [];

        ethereumButton.addEventListener("click", () => {
          ethereum.request({ method: "eth_requestAccounts" }).then(()=> {
              getAccount();
          });
        });

        sendEthButton.addEventListener("click", () => {
          ethereum
            .request({
              method: "eth_sendTransaction",
              params: [
                {
                  from: accounts[0],
                  to: "0x2f318C334780961FB129D2a6c30D0763d9a5C970",
                  value: "0x016345785d8a0000",
                  //   gasPrice: "0x09184e72a000",
                  gas: "0x2710",
                },
              ],
            })
            .then((txHash) => {
              console.log(txHash);
            })
            .catch((error) => {
              console.log(error);
            });
        });

        async function getAccount() {
          accounts = await ethereum.request({
            method: "eth_requestAccounts",
          });
          showAccount.innerHTML = accounts[0];
        }
      }
    </script>

    <button class="enableEthereumButton">Enable Ethereum</button>
    <button class="sendEthButton">Send Ethereum</button>

    <h2>Account: <span class="showAccount"></span></h2>
  </body>
</html>
